package com.library.weblib.api.controller

import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule
import com.fasterxml.jackson.module.kotlin.jacksonObjectMapper
import com.fasterxml.jackson.module.kotlin.readValue
import com.library.weblib.api.model.input.UserInput

/**
 * 
 * function injected in String type to get a json content and generat a T
 * @param T a type class to return
 * @return O object T generated by json content
 * 
 */
inline fun <reified T:Any> String.deserialize():T = jacksonObjectMapper().registerModule(JavaTimeModule())
        .readValue(this)

/**
 *
 * function injected in <code>{@link UserInput}</code> to generate a json
 * @return a json representation from <code>{@link UserInput}</code>
 *
 */

fun UserInput.serialize():String = jacksonObjectMapper().registerModule(JavaTimeModule())
        .writeValueAsString(this)

/**
 *
 * function injected in String type to generate a random text with size 'maxLength'
 * @param maxLength define a string length
 * @return a text with size 'maxLength'
 *
 */
fun String.Companion.random(maxLength: Int): String = (1..maxLength)
        .map { "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".random() }
        .joinToString("")